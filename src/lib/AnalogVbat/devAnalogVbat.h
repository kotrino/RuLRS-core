#pragma once

#include "common.h"
#include "device.h"

/**
 * @brief Включает/выключает режим медленного обновления телеметрии напряжения батареи
 * 
 * @param enable true - включить медленное обновление (удвоенный интервал)
 *               false - стандартный режим обновления
 * 
 * @details В медленном режиме частота отправки телеметрии уменьшается вдвое,
 *          что может быть полезно для экономии трафика при стабильном напряжении
 */
void Vbat_enableSlowUpdate(bool enable);

/**
 * @brief Внешняя структура устройства для измерения напряжения батареи
 * 
 * @details Содержит указатели на функции:
 *          - initialize: проверка наличия пина АЦП
 *          - start: настройка АЦП и параметров измерения
 *          - timeout: периодическое измерение и отправка телеметрии
 *          - event: не используется (nullptr)
 *          - subscribe: нет подписок на события (EVENT_NONE)
 */
extern device_t AnalogVbat_device;
